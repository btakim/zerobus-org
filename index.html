<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ZeroBus — Independent Mobility Concept</title>
  <meta name="description" content="ZeroBus is an independent mobility concept, studying when and where electric coaches can replace short‑haul flights and complement rail — reliably, affordably, and at scale." />
  <meta name="theme-color" content="#0EA5E9" />
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <style>
    :root{
      --bg:#ffffff; --bg-alt:#f7fafc; --ink:#0f172a; --muted:#475569;
      --line:#e2e8f0; --brand:#0ea5e9; --brand2:#10b981; --warn:#f59e0b;
      --radius:16px; --shadow:0 10px 24px rgba(2,6,23,.08);
      --ring:0 0 0 6px rgba(14,165,233,.12);
    }
    @media (prefers-color-scheme: dark){
      :root{ --bg:#0b1020; --bg-alt:#0e1528; --ink:#e6eef7; --muted:#94a3b8; --line:#1f2a44; --shadow:0 10px 28px rgba(0,0,0,.35); }
    }
    *,*::before,*::after{box-sizing:border-box}
    html{overflow-x:hidden}
    body{margin:0; padding:0; background:var(--bg); color:var(--ink); font:16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif}
    a{color:var(--brand); text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1120px; margin:0 auto; padding:0 20px}

    /* Header */
    header{position:sticky; top:0; z-index:50; background:transparent; border-bottom:1px solid var(--line); backdrop-filter:saturate(180%) blur(10px); overflow:hidden}
    header::before{content:""; position:absolute; inset:0; pointer-events:none; background:linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 25%, rgba(255,255,255,.4) 100%)}
    @media (prefers-color-scheme: dark){ header::before{ background:linear-gradient(90deg, rgba(11,16,32,1) 0%, rgba(11,16,32,1) 25%, rgba(11,16,32,.4) 100%) } }
    header > .container{position:relative; z-index:1}
    .nav{display:flex; align-items:center; justify-content:space-between; height:72px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.02em}
    .brand img{height:28px; width:auto; display:block}
    .brand-logo img{height:28px}
    .brand-icon img{height:48px; opacity:.9}
    nav a{margin-left:16px; color:inherit; opacity:.8}
    nav a:hover{opacity:1}
    nav a.active{color:var(--brand); opacity:1}
    .btn{display:inline-block; padding:10px 16px; border-radius:999px; background:linear-gradient(135deg,var(--brand),var(--brand2)); color:white; font-weight:700; box-shadow:var(--shadow)}
    .btn:focus{outline:none; box-shadow:var(--ring)}
    .btn-cta{display:inline-flex; align-items:center}
    .btn-cta .caret{display:inline-flex; align-items:center; justify-content:center; width:18px; height:18px; margin-left:8px; border-radius:999px; background:rgba(255,255,255,.16)}
    @media (prefers-color-scheme: dark){ .btn-cta .caret{ background:rgba(255,255,255,.12) } }
    .btn-cta .caret svg{display:block; width:12px; height:12px; transition:transform .2s ease}
    .btn-cta:hover .caret svg{transform:translateY(2px)}

    /* Mobile nav */
    .menu-toggle{display:none; appearance:none; border:1px solid var(--line); background:var(--bg); color:inherit; padding:10px 12px; border-radius:10px}
    .menu-toggle:focus{outline:none; box-shadow:var(--ring)}
    .menu-toggle svg{display:block; width:22px; height:22px}
    .menu-toggle .bar{transition:transform .2s ease, opacity .2s ease; transform-origin:50% 50%; transform-box:fill-box}
    .menu-toggle.open .bar1{transform:translateY(6px) rotate(45deg)}
    .menu-toggle.open .bar2{opacity:0}
    .menu-toggle.open .bar3{transform:translateY(-6px) rotate(-45deg)}
    .mobile-menu{display:none; position:fixed; top:72px; left:0; right:0; background:transparent; z-index:1000; pointer-events:none}
    .mobile-menu .container{padding:12px 20px; display:flex; justify-content:flex-end}
    .mobile-menu nav{display:flex; flex-direction:column; gap:6px; width:min(92vw, 190px); background:var(--bg); border:1px solid var(--line); border-radius:12px; padding:10px; box-shadow:var(--shadow); pointer-events:auto}
    .mobile-menu nav a{margin:0; padding:10px 10px; border-radius:8px; text-align:right}
    .mobile-menu nav a.btn{margin-top:6px; text-align:center}
    .mobile-menu.open{display:block}

    /* Body lock when mobile menu is open (use html to avoid sticky issues) */
    html.no-scroll{overflow:hidden}

    /* Use a wider breakpoint so the menu hides earlier */
    @media (max-width: 920px){
      header .nav{height:72px}
      header{overflow:visible}
      header > .nav > nav{display:none}
      .menu-toggle{display:inline-flex; align-items:center; justify-content:center}
      .brand img{height:28px}
      .brand-icon img{height:48px}
      .mobile-menu{top:72px}
    }

    /* Hero */
    .hero{position:relative; padding:96px 0 56px; text-align:center; background:radial-gradient(1200px 400px at 50% -20%, rgba(14,165,233,.18), transparent 60%), var(--bg)}
    .kicker{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:var(--bg-alt); border:1px solid var(--line); color:#0e7490; font-weight:700; letter-spacing:.14em}
    @media (prefers-color-scheme: dark){ .kicker{ color:#7dd3fc; }}
    h1{font-size:48px; line-height:1.05; margin:.5em 0 .3em}
    .gradient{background:linear-gradient(90deg,var(--brand),var(--brand2),#7c3aed); -webkit-background-clip:text; background-clip:text; color:transparent; background-size:200% 100%; animation: shimmer 6s linear infinite}
    .lead{max-width:820px; margin:0 auto; color:var(--muted); font-size:20px}
    .cta-row{margin-top:24px; display:flex; justify-content:center; gap:12px}

    /* Sections */
    section{padding:72px 0; position:relative}
    .alt{background:var(--bg-alt)}
    .section-head{display:flex; align-items:flex-end; justify-content:space-between; gap:12px; margin-bottom:18px}
    h2{font-size:28px; margin:0 0 10px}
    h3{margin:0 0 8px}
    .muted{color:var(--muted)}
    /* Ensure section content sits above ornaments within sections */
    section > .container{position:relative; z-index:1}
    /* Section next chevron */
    .section-next{position:absolute; left:50%; bottom:10px; transform:translateX(-50%); display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; text-decoration:none; color:inherit; opacity:.6}
    .section-next:hover{opacity:1}
    .section-next svg{display:block; width:22px; height:22px; animation: float-down 1.6s ease-in-out infinite}
    @keyframes float-down { 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(4px) } }

    /* Cards */
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:22px}
    .card{background:var(--bg); border:1px solid var(--line); border-radius:var(--radius); padding:22px; box-shadow:var(--shadow)}
    /* Perimeter glow (only edges) + slight scale on hover */
    .card{position:relative; transition:transform .22s ease, box-shadow .22s ease}
    .card:hover{transform:scale(1.02); box-shadow:
      0 0 0 2px rgba(16,185,129,.55),
      0 0 22px 6px rgba(14,165,233,.35),
      0 10px 24px rgba(2,6,23,.10)}
    .card:hover h2, .card:hover h3, .card:hover p, .card:hover li, .card:hover span.pill{transform:scale(1.015); transform-origin:center; transition:transform .22s ease}

    /* Removed scroll ornaments */
    ul{margin:0; padding-left:18px}
    li{margin:6px 0}

    /* About bus ornament */
    .about-bus{position:relative; display:flex; justify-content:center; pointer-events:none; margin-top:20px}
    .about-bus img{width:min(900px,95%); height:auto; transform:translateX(30vw); filter:drop-shadow(0 6px 14px rgba(2,6,23,.18))}

    /* Footer */
    footer{padding:28px 0; border-top:1px solid var(--line); color:var(--muted); font-size:14px; background:var(--bg)}

    /* Animations */
    @keyframes rise { from{opacity:0; transform: translateY(10px)} to{opacity:1; transform: translateY(0)} }
    .reveal{opacity:0; transform:translateY(10px)}
    .reveal.in{animation: rise .6s ease-out forwards}
    @keyframes shimmer { from{background-position:0% 50%} to{background-position:200% 50%} }
    @media (prefers-reduced-motion: reduce){ .reveal,.reveal.in{animation:none; opacity:1; transform:none} }

    /* Anchor offset for sticky header */
    .anchor{position:relative; top:-88px; visibility:hidden}

    /* Tiny badge */
    .pill{display:inline-block; padding:6px 10px; border-radius:10px; background:var(--bg-alt); color:#0f172a; border:1px solid var(--line); font-size:12px}
    @media (prefers-color-scheme: dark){ .pill{ color:#e6eef7; }}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav">
      <div class="brand">
        <picture class="brand-logo">
          <source srcset="assets/logo-rect-dark.svg" media="(prefers-color-scheme: dark)">
          <img src="assets/logo-rect-light.svg" alt="ZeroBus logo" />
        </picture>
        <picture class="brand-icon">
          <source srcset="assets/ebus-icon-light.svg" media="(prefers-color-scheme: dark)">
          <img src="assets/ebus-icon-light.svg" alt="Electric bus icon" />
        </picture>
      </div>
      <button class="menu-toggle" aria-label="Open menu" aria-controls="mobileMenu" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line class="bar bar1" x1="3" y1="6" x2="21" y2="6" />
          <line class="bar bar2" x1="3" y1="12" x2="21" y2="12" />
          <line class="bar bar3" x1="3" y1="18" x2="21" y2="18" />
        </svg>
      </button>
      <nav>
        <a href="#about">About</a>
        <a href="#whynow">Why&nbsp;Now?</a>
        <a href="#problem">Problem</a>
        <a href="#focus">Focus</a>
        <a href="#approach">Approach</a>
        <a href="#partners">Partners</a>
        <a class="btn" href="mailto:hello@zerobus.org">Email Us</a>
      </nav>
    </div>
    <div id="mobileMenu" class="mobile-menu" hidden>
      <div class="container">
        <nav>
          <a href="#about">About</a>
          <a href="#whynow">Why&nbsp;Now?</a>
          <a href="#problem">Problem</a>
          <a href="#focus">Focus</a>
          <a href="#approach">Approach</a>
          <a href="#partners">Partners</a>
          <a class="btn" href="mailto:hello@zerobus.org">Email Us</a>
        </nav>
      </div>
    </div>
  </header>
  


  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <!--<div class="kicker">ZeroBus</div> -->
      <h1 class="reveal"><span class="gradient">Zero‑emission intercity bus travel</span><br> is within reach.</h1>
      <p class="lead reveal" style="animation-delay:.08s">ZeroBus is shaping the vision for a new generation of electric intercity coaches — connecting cities cleaner, and more comfortably. By complementing rail and replacing short-haul flights, ZeroBus makes sustainable, affordable mobility a reality for everyone.</p>
      <div class="cta-row reveal" style="animation-delay:.14s">
        <a class="btn btn-cta" href="#about" aria-label="Find out more about ZeroBus">
          Discover ZeroBus
          <span class="caret" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <polyline points="6 9 12 15 18 9" />
            </svg>
          </span>
        </a>
      </div>
    </div>
  </section>

  <!-- About -->
  <span id="about" class="anchor"></span>
  <section>
    <div class="container">
    <div class="grid">
      <div class="card reveal">
        <h2>What is ZeroBus?</h2>
        <p class="muted">
          ZeroBus is a <strong>strategic mobility concept</strong> that envisions a new platform model for <strong>zero-emission intercity travel</strong>. 
          Inspired by the asset-light model pioneered by FlixBus, ZeroBus focuses on <strong>medium-distance electric-coach corridors</strong> (≈200–500 km) and defines a 
          <strong>Zero-Emission + Comfort specification</strong> that partner operators could adopt to offer sustainable, high-quality travel experiences.
        </p>
      </div>
      <div class="card reveal" style="animation-delay:.08s">
        <h2>Why does ZeroBus exist?</h2>
        <ul class="muted">
          <li><strong>Changing expectations:</strong> The next generation of travelers demands cleaner, and more comfortable journeys.</li>
          <li><strong>Industry readiness:</strong> New electric coaches from MAN, Daimler, BYD, IVECO, Yutong, Higer and more will arrive by 2026.</li>
          <li><strong>Transformation catalyst:</strong> ZeroBus addresses the opportunity to lead the market shift toward zero-emission intercity travel.</li>
        </ul>
      </div>
    </div>
    <div class="about-bus" aria-hidden="true">
      <img src="assets/ebus.png" alt=""/>
    </div>
    <a class="section-next" href="#whynow" aria-label="Next section">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </a>
  </section>


  <!-- Why Now -->
  <span id="whynow" class="anchor"></span>
  <section class="alt">
    <div class="container">
      <div class="section-head">
        <h2 class="reveal">Why 2026 is the moment?</h2>
      </div>
      <div class="grid">
        <div class="card reveal" style="animation-delay:.18s">
          <h3>Changing Demand</h3>
          <p class="muted">
            Climate-aware passengers, and the travel habits of younger generations are accelerating 
            demand for reliable sustainable mobility — provided comfort and affordability remain competitive.
          </p>
        </div>
        <div class="card reveal" style="animation-delay:.05s">
          <h3>Policy & Incentives</h3>
          <p class="muted">
            Driven by the EU’s Green Deal and Fit-for-55 framework, national and EU programs are scaling funding, emissions targets, 
            and infrastructure investment — creating a clear pathway for zero-emission fleet deployment.
          </p>
        </div>
        <div class="card reveal" style="animation-delay:.1s">
          <h3>Passenger Experience</h3>
          <p class="muted">
            Amenities such as Qi2 and USB-C charging, reliable Wi-Fi, and app-based infotainment are becoming standard expectations. 
            Intercity travel is entering a new era where comfort and sustainability coexist.
          </p>
        </div>
        <div class="card reveal" style="animation-delay:.14s">
          <h3>AI-Enabled Operations</h3>
          <p class="muted">
            Advances in artificial intelligence are reducing the cost of building and managing smart mobility systems — 
            from predictive maintenance and dynamic pricing to energy-aware scheduling and automated customer support.
          </p>
        </div>
        <div class="card reveal">
          <h3>Technology</h3>
          <p class="muted">
            European and Asian OEMs including MAN, Daimler are launching new electric coaches with ranges exceeding 500 km. 
            This next generation of vehicles makes zero-emission intercity operations technically and economically viable for the first time.
          </p>
        </div>
        <div class="card reveal" style="animation-delay:.22s">
          <h3>Infrastructure</h3>
          <p class="muted">
            EU-funded charging corridors and depot networks are expanding rapidly, but coverage for long-range coaches is still developing. 
            Progress by 2026 will open the first true window for electric intercity pilots.
          </p>
        </div>
      </div>
    </div>
    <a class="section-next" href="#problem" aria-label="Next section">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </a>
  </section>

  <!-- Problem -->
  <span id="problem" class="anchor"></span>
  <section>
    <div class="container">
      <div class="section-head">
        <h2 class="reveal">Problem</h2>
      </div>
      <div class="grid">
        <div class="card reveal">
          <h3>Limited Sustainable Alternatives</h3>
          <p class="muted">
            Rail depends on long investment cycles, causing relatively higher prices and less reliability in some cases like Germany.
            Zero-emission aviation is still years away, while travel by flight remain comperatively fast but highly carbon-intensive. 
            Diesel coaches fill the gap yet continue to be polluting, noisy, and perceived as a low-quality option.
          </p>
        </div>
        <div class="card reveal" style="animation-delay:.06s">
          <h3>Outdated Passenger Experience</h3>
          <p class="muted">
            Most intercity buses still offer unreliable Wi-Fi, limited charging, and dated interiors — 
            far from what travelers expect in a connected era where smartphones serve as the main infotainment hub.
            The passanger storage spaces frequently lack security, inviting petty theft.
            Even basic amenities such as water or light snacks are often missing.
          </p>
        </div>
      </div>
    </div>
    <a class="section-next" href="#focus" aria-label="Next section">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </a>
  </section>

  <!-- Focus -->
  <span id="focus" class="anchor"></span>
  <section class="alt">
    <div class="container">
      <div class="section-head">
        <h2 class="reveal">Strategic Focus Areas</h2>
      </div>
      <div class="grid">
        <div class="card reveal"><h3>Route & Service Design</h3><p class="muted">Identify 200–500 km corridors where electric coaches can operate reliable, high-frequency services with today’s and near-term vehicles.</p></div>
        <div class="card reveal" style="animation-delay:.04s"><h3>Infrastructure Integration</h3><p class="muted">Define the right balance of depot and en-route charging, aligned with local grid capacity and tariff structures.</p></div>
        <div class="card reveal" style="animation-delay:.08s"><h3>Financial Viability</h3><p class="muted">Model total cost of ownership, utilization rates, and incentives to ensure zero-emission services are commercially sustainable.</p></div>
        <div class="card reveal" style="animation-delay:.12s"><h3>Passenger Experience & Comfort</h3><p class="muted">Establish the comfort specification — legroom, device charging, Wi-Fi, and basic onboard amenities.</p></div>
        <div class="card reveal" style="animation-delay:.16s"><h3>Deployment Strategy</h3><p class="muted">Design pilot configurations and KPIs that minimize risk and enable replication across multiple corridors.</p></div>
        <div class="card reveal" style="animation-delay:.20s"><h3>Digital Backbone</h3><p class="muted">Define which vehicle, charging, and environmental data streams are essential for reliable, efficient operations.</p></div>
      </div>
    </div>
    <a class="section-next" href="#approach" aria-label="Next section">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </a>
  </section>

  <!-- Approach -->
  <span id="approach" class="anchor"></span>
  <section>
    <div class="container">
      <div class="section-head">
        <h2 class="reveal">Approach</h2>
      </div>
      <div class="grid">
        <div class="card reveal"><h3>Scenario Modeling</h3><p class="muted">Energy, range, and schedule simulations accounting for topography, weather, and stop patterns.</p></div>
        <div class="card reveal" style="animation-delay:.05s"><h3>Industry Collaboration</h3><p class="muted">Dialogue with operators, OEMs, infrastructure providers, and policymakers to align technical and operational realities.</p></div>
        <div class="card reveal" style="animation-delay:.1s"><h3>Benchmarking</h3><p class="muted">Evaluate cost, time, and emissions across coach, rail, and air modes to define competitive advantages.</p></div>
      </div>
    </div>
    <a class="section-next" href="#partners" aria-label="Next section">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </a>
  </section>

  <!-- Partners -->
  <span id="partners" class="anchor"></span>
  <section class="alt">
    <div class="container">
      <div class="section-head">
        <h2 class="reveal">Stakeholders & Partners</h2>
      </div>
      <div class="grid">
        <div class="card reveal"><h3>Bus Operators</h3><p class="muted">Adopt the Zero-Emission + Comfort specification and identify corridors ready for pilot deployment.</p></div>
        <div class="card reveal" style="animation-delay:.05s"><h3>Vehicle Manufacturers</h3><p class="muted">Coordinate product readiness, range envelopes, and charging compatibility with operator needs.</p></div>
        <div class="card reveal" style="animation-delay:.1s"><h3>Charging & Distribution System Operators</h3><p class="muted">Integrate coach depots into corridor-level grid and tariff planning.</p></div>
        <div class="card reveal" style="animation-delay:.15s"><h3>Passengers</h3><p class="muted">Experience new standards of comfort, quietness, and connectivity in long-distance electric travel.</p></div>
        <div class="card reveal" style="animation-delay:.2s"><h3>Bus Terminal Operators</h3><p class="muted">Adapt infrastructure and passenger amenities for electric coach operations.</p></div>
        <div class="card reveal" style="animation-delay:.25s"><h3>Public Authorities & Advocates</h3><p class="muted">Use ZeroBus as a reference model for policy design, equity, and sustainability assessments.</p></div>
      </div>
      <p class="muted" style="margin-top:16px">Email Us: <a href="mailto:hello@zerobus.org">hello@zerobus.org</a></p>
    </div>
    <a class="section-next" href="#contact" aria-label="Next section">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </a>
  </section>


  <!-- Contact -->
  <section id="contact">
    <div class="container">
      <div class="card reveal" style="text-align:center">
        <h2>Contact</h2>
        <p class="muted">For inquiries, briefings, or concept materials, reach out anytime.</p>
        <a class="btn" href="mailto:hello@zerobus.org">hello@zerobus.org</a>
      </div>
    </div>
  </section>

  <!-- Footer / Legal -->
  <footer>
    <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap">
      <div>© <span id="year"></span> ZeroBus - Independent Mobility Concept</div>
      <div style="display:flex; gap:14px">
        <a href="impressum.html" rel="nofollow noreferrer" referrerpolicy="no-referrer">Impressum</a>
        <a href="privacy.html" rel="nofollow noreferrer" referrerpolicy="no-referrer">Privacy</a>
      </div>
    </div>
  </footer>

  

  <script>
    // Year & timestamp
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();
    const updatedEl = document.getElementById('updated');
    if (updatedEl) updatedEl.textContent = new Date().toLocaleDateString(undefined,{year:'numeric', month:'short'});

    // IntersectionObserver reveal animations
    const revealEls = document.querySelectorAll('.reveal');
    if ('IntersectionObserver' in window){
      const io = new IntersectionObserver(function(entries){
        entries.forEach(function(e){ if(e.isIntersecting){ e.target.classList.add('in'); io.unobserve(e.target);} });
      },{threshold:.18});
      revealEls.forEach(function(el){ io.observe(el); });
    } else {
      // Fallback: reveal immediately
      revealEls.forEach(function(el){ el.classList.add('in'); });
    }

    // Active nav highlight on scroll (desktop nav only)
    var links = Array.prototype.slice.call(document.querySelectorAll('header > .nav > nav a')).filter(function(a){ return a.getAttribute('href').startsWith('#'); });
    var secs = links.map(function(a){
      var href = a.getAttribute('href');
      return document.querySelector(href) || document.querySelector(href + ' .anchor');
    });
    var onScroll = function(){
      var pos = window.scrollY + 100;
      links.forEach(function(a,i){
        var href = a.getAttribute('href');
        var sec = document.querySelector(href) || document.querySelector(href + ' .anchor');
        if(!sec) return;
        var top = sec.getBoundingClientRect().top + window.scrollY;
        var next = secs[i+1]? (secs[i+1].getBoundingClientRect().top + window.scrollY) : Infinity;
        a.classList.toggle('active', pos>=top && pos<next);
      });
    };
    document.addEventListener('scroll', onScroll, {passive:true});
    onScroll();

    // Mobile menu toggle
    var menuBtn = document.querySelector('.menu-toggle');
    var mobileMenu = document.getElementById('mobileMenu');
    var outsideClickBound = false;
    function setMenuState(open){
      if(!menuBtn || !mobileMenu) return;
      if (open){
        mobileMenu.classList.add('open');
        mobileMenu.removeAttribute('hidden');
        document.documentElement.classList.add('no-scroll');
        if (!outsideClickBound){
          document.addEventListener('click', onDocumentClick, true);
          document.addEventListener('touchstart', onDocumentClick, true);
          outsideClickBound = true;
        }
      } else {
        mobileMenu.classList.remove('open');
        mobileMenu.setAttribute('hidden','');
        document.documentElement.classList.remove('no-scroll');
        if (outsideClickBound){
          document.removeEventListener('click', onDocumentClick, true);
          document.removeEventListener('touchstart', onDocumentClick, true);
          outsideClickBound = false;
        }
      }
      menuBtn.setAttribute('aria-expanded', String(open));
      if (open){ menuBtn.classList.add('open'); }
      else { menuBtn.classList.remove('open'); }
    }
    function toggleMenu(e){
      if(e){ e.preventDefault(); e.stopPropagation(); }
      var isOpen = mobileMenu && mobileMenu.classList.contains('open');
      setMenuState(!isOpen);
    }
    // Click/Touch/Keyboard handlers for broader mobile support
    if (menuBtn){
      menuBtn.addEventListener('click', toggleMenu, {passive:false});
      menuBtn.addEventListener('touchend', toggleMenu, {passive:false});
      menuBtn.addEventListener('keydown', function(e){
        if(e.key === 'Enter' || e.key === ' '){ toggleMenu(e); }
      });
    }
    // Close on overlay click or ESC
    window.addEventListener('keydown', function(e){ if(e.key==='Escape') setMenuState(false); });
    function onDocumentClick(e){
      var t = e.target;
      if (!t) return;
      if (mobileMenu.contains(t) || menuBtn.contains(t)) return;
      setMenuState(false);
    }
    // Close menu on navigation click
    if (mobileMenu){
      Array.prototype.slice.call(mobileMenu.querySelectorAll('a')).forEach(function(a){
        a.addEventListener('click', function(){
          if(mobileMenu.classList.contains('open')) setMenuState(false);
        });
      });
    }

    // Smooth anchor scrolling
    Array.prototype.slice.call(document.querySelectorAll('a[href^="#"]')).forEach(function(a){
      a.addEventListener('click', function(e){
        var id = a.getAttribute('href');
        if(id && id.length>1){
          var target = document.querySelector(id);
          if (target){
            e.preventDefault();
            target.scrollIntoView({behavior:'smooth', block:'start'});
          }
        }
      });
    });

    // About bus horizontal scroll progress
    var aboutAnchor = document.querySelector('#about');
    var aboutSection = aboutAnchor ? aboutAnchor.nextElementSibling : null;
    var aboutBus = document.querySelector('.about-bus img');
    function updateAboutBus(){
      if(!aboutSection || !aboutBus) return;
      var r = aboutSection.getBoundingClientRect();
      var vh = window.innerHeight;
      var start = vh;
      var end = -r.height;
      var t = Math.max(0, Math.min(1, (start - r.top) / (start - end)));
      var x = (1 - t) * 15 + 15;
      aboutBus.style.transform = 'translateX(' + x + 'vw)';
    }
    updateAboutBus();
    window.addEventListener('scroll', updateAboutBus, {passive:true});
  </script>
</body>
</html>
